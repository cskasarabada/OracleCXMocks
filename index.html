<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Redwood CX→PPM Demo</title>
<link rel="stylesheet" href="assets/redwood.css"/>
<script defer src="assets/app.js"></script>
</head>
<body>

<div class="header"><span class="product">Oracle CX & PPM</span><span class="trail">/ Redwood Demo</span></div>
<div class="shell">
  <div class="tabs">
    <a class="tab" href="index.html">Overview</a>
    <a class="tab" href="Easy_Start_Flows.html">Easy Start</a>
    <a class="tab" href="sales_cloud.html">Sales Flow</a>
    <a class="tab" href="cx_lead.html">Lead</a>
    <a class="tab" href="cx_opportunity.html">Opportunity</a>
    <a class="tab" href="ppm_pursuit.html">PPM Pursuit</a>
    <a class="tab" href="ppm_construction.html">PPM Construction</a>
    <a class="tab" href="analytics.html">Analytics</a>
    <a class="tab" href="forecasting_pipeline.html">Forecasting</a>
    <a class="tab" href="integration_features.html">Integration</a>
    <a class="tab" href="sales_process_visualization.html">Process Visualization</a>
    <a class="tab" href="results_driven.html">Results Driven</a>
    <a class="tab btn brand" href="quick_sales_screen.html">Quick Sales Screen</a>
  </div>

<div class="grid">
  <div class="card"><h2>Flow Overview</h2><div class="body">
    <ol>
      <li><strong>Lead (CX Sales – Redwood)</strong>: qualify a lead and convert to Opportunity.</li>
      <li><strong>Opportunity (CX Sales – Redwood)</strong>: manage discovery, value engineering and next actions.</li>
      <li><strong>Quote</strong>: configure + price the solution, then deliver a customer-ready proposal.</li>
      <li><strong>PPM Pursuit</strong>: use OIC to open a pursuit record in PPM and refine estimates.</li>
      <li><strong>Project Delivery</strong>: award the pursuit to construction, track execution, and kick off warranty at substantial completion.</li>
    </ol>
    <p>Use the <strong>Sales Flow</strong> tab for a dedicated Oracle Sales Cloud storyline spanning lead, opportunity, quote, pursuit and project delivery.</p>
    <div class="actions"><a class="btn brand" href="cx_lead.html">Start with Lead</a><a class="btn" href="#" onclick="RWD.reset(); alert('Demo state cleared'); return false;">Reset State</a></div>
  </div></div>
  <div class="card"><h2>Activity Log</h2><div class="body" id="log"></div></div>
  <div class="card"><h2>Agents</h2><div class="body">
    <div class="agents">
      <div class="agent">
        <h3>Sales Agent</h3>
        <p>Assist with lead qualification, follow-ups, and opportunity creation.</p>
        <div class="actions">
          <a class="btn" href="#" onclick="return startSalesAgentWithAssistant();">Start</a>
          <a class="btn" href="#" onclick="RWD.stopAgent('sales'); return false;">Stop</a>
          <span class="agent-status" id="agent-sales-status">idle</span>
        </div>
      </div>
      <div class="agent">
        <h3>Forecasting Agent</h3>
        <p>Analyze pipeline data and suggest forecast adjustments.</p>
        <div class="actions">
          <a class="btn" href="#" onclick="RWD.startAgent('forecast'); return false;">Start</a>
          <a class="btn" href="#" onclick="RWD.stopAgent('forecast'); return false;">Stop</a>
          <span class="agent-status" id="agent-forecast-status">idle</span>
        </div>
      </div>
      <div class="agent">
        <h3>Integration Agent</h3>
        <p>Simulate integrations between CX and PPM for demo scenarios.</p>
        <div class="actions">
          <a class="btn" href="#" onclick="RWD.startAgent('integration'); return false;">Start</a>
          <a class="btn" href="#" onclick="RWD.stopAgent('integration'); return false;">Stop</a>
          <span class="agent-status" id="agent-integration-status">idle</span>
        </div>
      </div>
    </div>
  </div></div>
  <div class="card" id="agent-sim-card"><h2>AI Agent Simulation</h2>
    <div class="body agent-sim">
      <p>Use this board to narrate how Argano&rsquo;s CX Sales Cloud agents collaborate in real time. Start an agent to watch live intents, automations, and insights stream across each lane.</p>
      <div class="agent-sim-controls">
        <a class="btn brand" href="#" onclick="window.RWD && RWD.startAgent('sales'); window.RWD && RWD.startAgent('forecast'); window.RWD && RWD.startAgent('integration'); return false;">Start All Agents</a>
        <a class="btn" href="#" onclick="window.RWD && RWD.stopAgent('sales'); window.RWD && RWD.stopAgent('forecast'); window.RWD && RWD.stopAgent('integration'); return false;">Stop All</a>
      </div>
      <div class="agent-sim-grid">
        <div class="sim-panel" data-agent="sales">
          <div class="sim-head">
            <div>
              <p class="eyebrow">Sales CoPilot</p>
              <h3>Lead &amp; Opportunity Agent</h3>
            </div>
            <span class="chip" id="sim-sales-state">Idle</span>
          </div>
          <p class="sim-desc">Qualifies leads, logs follow-ups, and posts Smart Action nudges as tasks evolve.</p>
          <ul class="sim-feed" id="sim-sales-feed"></ul>
        </div>
        <div class="sim-panel" data-agent="forecast">
          <div class="sim-head">
            <div>
              <p class="eyebrow">Forecasting Analyst</p>
              <h3>Pipeline &amp; AI Insights</h3>
            </div>
            <span class="chip" id="sim-forecast-state">Idle</span>
          </div>
          <p class="sim-desc">Reads pipeline telemetry, posts acceleration ideas, and keeps leadership informed.</p>
          <ul class="sim-feed" id="sim-forecast-feed"></ul>
        </div>
        <div class="sim-panel" data-agent="integration">
          <div class="sim-head">
            <div>
              <p class="eyebrow">Integration Orchestrator</p>
              <h3>CPQ / DocuSign / PPM</h3>
            </div>
            <span class="chip" id="sim-integration-state">Idle</span>
          </div>
          <p class="sim-desc">Launches OIC flows, syncs pursuit cost sheets, and writes back doc statuses.</p>
          <ul class="sim-feed" id="sim-integration-feed"></ul>
        </div>
      </div>
    </div>
  </div>
  <div class="card" id="stage-agent-card">
    <h2>Agent Stage Intelligence</h2>
    <div class="body stage-boards">
      <div class="stage-panel" data-stage="lead">
        <div class="stage-header">
          <div>
            <p class="eyebrow">Lead Journey</p>
            <h3>Qualify &amp; Route</h3>
          </div>
          <span class="stage-chip" id="stage-lead-current">--</span>
        </div>
        <p class="stage-desc">Sales Agent watches every lead step, ties Smart Actions to approvals, and alerts you when it&rsquo;s time to convert.</p>
        <ul class="stage-steps" id="stage-lead-steps"></ul>
        <div class="workflow-callouts">
          <span>Workflow: SDR capture &rarr; Marketing verify &rarr; AE acceptance</span>
          <span>Approvals: Lead source validation, data quality review</span>
        </div>
      </div>
      <div class="stage-panel" data-stage="opportunity">
        <div class="stage-header">
          <div>
            <p class="eyebrow">Opportunity Journey</p>
            <h3>Value Engineering &amp; Controls</h3>
          </div>
          <span class="stage-chip" id="stage-opportunity-current">--</span>
        </div>
        <p class="stage-desc">Opportunity Agent keeps the step-by-step workflow visible, including approvals for pricing, partners, and DocuSign.</p>
        <ul class="stage-steps" id="stage-opportunity-steps"></ul>
        <div class="workflow-callouts">
          <span>Workflow: Discovery &rarr; Solutioning &rarr; Proposal &rarr; Negotiation</span>
          <span>Approvals: Discount guardrails, partner onboarding, DocuSign legal pass</span>
        </div>
      </div>
    </div>
  </div>
</div>
<style>
#agent-sim-card .agent-sim{display:flex;flex-direction:column;gap:18px;}
.agent-sim-controls{display:flex;gap:10px;flex-wrap:wrap;}
.agent-sim-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;}
.sim-panel{border:1px solid var(--rw-border);border-radius:18px;padding:16px;background:#fff6f0;}
.sim-head{display:flex;justify-content:space-between;align-items:flex-start;gap:10px;}
.sim-head h3{margin:0;font-size:1.1rem;}
.sim-desc{margin:8px 0 12px;color:#475569;font-size:13px;}
.chip{border-radius:999px;padding:4px 12px;font-size:12px;font-weight:600;background:#fef3c7;color:#b45309;}
.chip.running{background:#dcfce7;color:#15803d;}
.chip.stopped{background:#fee2e2;color:#991b1b;}
.sim-feed{list-style:none;margin:0;padding:0;min-height:96px;}
.sim-feed li{font-size:12px;padding:6px 8px;margin-bottom:6px;border-radius:8px;background:#fff;border:1px dashed rgba(255,122,24,.4);color:#7c2d12;}
.sim-feed li strong{display:block;color:#0f172a;}
@media(max-width:640px){
  .agent-sim-controls{flex-direction:column;}
}
</style>
<script>
 window.addEventListener('DOMContentLoaded', function(){
   var d=RWD.get();
   var log=document.getElementById('log');
   (d.logs||[]).forEach(function(m){
     var p=document.createElement('div');
     p.textContent=m;
     log.appendChild(p);
   });
    // Periodically refresh agent status display
    const lastActionCache={};
    function pushFeed(agent,action){
      if(!action || action==='stopped') return;
      if(lastActionCache[agent]===action) return;
      lastActionCache[agent]=action;
      const list=document.getElementById('sim-'+agent+'-feed');
      if(!list) return;
      const li=document.createElement('li');
      li.innerHTML='<strong>'+new Date().toLocaleTimeString()+'</strong>'+action;
      list.insertBefore(li,list.firstChild);
      while(list.children.length>4){ list.removeChild(list.lastChild); }
    }
    function updateChip(agent,state){
      const chip=document.getElementById('sim-'+agent+'-state');
      if(!chip) return;
      const status = state.running ? 'running' : 'stopped';
      chip.textContent = status.charAt(0).toUpperCase()+status.slice(1);
      chip.classList.remove('running','stopped');
      chip.classList.add(status);
    }
    function refreshAgentStatus(){
      try{
        var s = RWD.getAgentStates ? RWD.getAgentStates() : {};
        var sales = s.sales || s['sales agent'] || {};
        var fc = s.forecast || s['forecasting agent'] || {};
        var integ = s.integration || s['integration agent'] || {};
        var elSales = document.getElementById('agent-sales-status');
        var elFc = document.getElementById('agent-forecast-status');
        var elInt = document.getElementById('agent-integration-status');
        if(elSales) elSales.textContent = (sales.running ? 'running' : 'stopped') + (sales.lastAction ? ' — '+sales.lastAction : '');
        if(elFc) elFc.textContent = (fc.running ? 'running' : 'stopped') + (fc.lastAction ? ' — '+fc.lastAction : '');
        if(elInt) elInt.textContent = (integ.running ? 'running' : 'stopped') + (integ.lastAction ? ' — '+integ.lastAction : '');
        updateChip('sales', sales);
        updateChip('forecast', fc);
        updateChip('integration', integ);
        pushFeed('sales', sales.lastAction);
        pushFeed('forecast', fc.lastAction);
        pushFeed('integration', integ.lastAction);
      }catch(e){ console.log('refreshAgentStatus', e); }
    }
    refreshAgentStatus();
    setInterval(refreshAgentStatus, 2000);
    window.startSalesAgentWithAssistant=function(){
      if(window.RWD){ RWD.startAgent('sales'); }
      openSalesAssistant();
      return false;
    };
    function openSalesAssistant(){
      const modal=document.getElementById('sales-assistant-modal');
      if(!modal) return;
      modal.classList.add('visible');
      const feed=modal.querySelector('.chat-feed');
      if(feed && !feed.dataset.seeded){
        feed.dataset.seeded='1';
        appendAssistantMessage('Need anything on leads, opps, or pursuits? Ask me and I will pull live demo data.');
      }
      document.getElementById('sales-assistant-input').focus();
    }
    window.closeSalesAssistant=function(){
      document.getElementById('sales-assistant-modal').classList.remove('visible');
    };
    function appendMessage(sender,text){
      const feed=document.querySelector('#sales-assistant-modal .chat-feed');
      if(!feed) return;
      const li=document.createElement('li');
      li.className='msg '+sender;
      li.innerHTML='<span>'+text+'</span>';
      feed.appendChild(li);
      feed.scrollTop=feed.scrollHeight;
    }
    function appendAssistantMessage(text){ appendMessage('assistant', text); }
    function appendUserMessage(text){ appendMessage('user', text); }
    window.sendSalesAssistantMessage=function(ev){
      ev.preventDefault();
      const input=document.getElementById('sales-assistant-input');
      const q=(input.value||'').trim();
      if(!q) return false;
      appendUserMessage(q);
      input.value='';
      setTimeout(function(){ respondFromDemoData(q); }, 400);
      return false;
    };
    function respondFromDemoData(q){
      const data = window.RWD ? RWD.get() : {lead:{},oppty:{},pursuit:{},const:{}};
      const lower=q.toLowerCase();
      let answer='';
      if(lower.includes('lead')){
        answer='Latest lead: '+(data.lead.company||'Unnamed')+' ('+(data.lead.contact||'contact TBD')+') score '+(data.lead.score||'60')+'. We can convert or nudge via Smart Actions.';
      }else if(lower.includes('opportunity')||lower.includes('deal')){
        answer='Opportunity "'+(data.oppty.name||'New Build')+'" at $'+(data.oppty.amount||250000).toLocaleString()+' is in '+(data.oppty.stage||'Qualification')+'. Need a next step? I can suggest partner involvement or run a CPQ quote.';
      }else if(lower.includes('pursuit')||lower.includes('ppm')){
        answer='Pursuit "'+(data.pursuit.name||'Demo Pursuit')+'" is '+(data.pursuit.status||'Draft')+' with estimate $'+(data.pursuit.estimate||0).toLocaleString()+'. Integration agent is ready to sync cost sheets.';
      }else if(lower.includes('project')){
        answer='Delivery project "'+(data.const.name||'Demo Construction')+'" is '+(data.const.status||'Planned')+' with budget $'+(data.const.budget||0).toLocaleString()+'. I can highlight schedule or warranty milestones.';
      }else if(lower.includes('help')||lower.includes('what can you do')){
        answer='I can qualify leads, propose next actions, launch approvals, or create pursuits via OIC. Just ask about leads, opportunities, quotes, or delivery.';
      }else{
        answer='I pulled context but need a specific area (lead, opportunity, pursuit, project). Ask something like "What\'s the status of our pursuit?" and I will respond with live data.';
      }
      appendAssistantMessage(answer);
    }
    function renderStageBoards(){
      if(!window.RWD) return;
      const data = RWD.get();
      const leadList=document.getElementById('stage-lead-steps');
      const oppList=document.getElementById('stage-opportunity-steps');
      const stages=RWD.flowStages||[];
      const leadStage=stages.find(s=>s.key==='lead');
      const oppStage=stages.find(s=>s.key==='opportunity');
      if(leadStage && leadList){
        document.getElementById('stage-lead-current').textContent=(data.lead.status||leadStage.statuses[0]);
        leadList.innerHTML='';
        leadStage.statuses.forEach(function(step){
          const li=document.createElement('li');
          const highlight = (data.lead.status||'').toLowerCase()===step.toLowerCase();
          li.innerHTML='<strong>'+step+'</strong>'+(highlight?'<span style="color:#16a34a;font-weight:600">Current via Sales Agent</span>':'<span>Smart Action ready</span>');
          leadList.appendChild(li);
        });
      }
      if(oppStage && oppList){
        document.getElementById('stage-opportunity-current').textContent=(data.oppty.stage||oppStage.statuses[0]);
        oppList.innerHTML='';
        oppStage.statuses.forEach(function(step){
          const li=document.createElement('li');
          const highlight=(data.oppty.stage||'').toLowerCase()===step.toLowerCase();
          li.innerHTML='<strong>'+step+'</strong>'+(highlight?'<span style="color:#ff7a18;font-weight:600">Agent engaged</span>':'<span>Approvals queued</span>');
          oppList.appendChild(li);
        });
      }
    }
    renderStageBoards();
 });
</script>
<div id="sales-assistant-modal" class="agent-modal">
  <div class="agent-modal-content">
    <header>
      <div>
        <p class="eyebrow">Argano GenAI</p>
        <h3>Sales Agent Assist</h3>
      </div>
      <button class="ghost-btn small" onclick="closeSalesAssistant()">Close</button>
    </header>
    <ul class="chat-feed"></ul>
    <form class="chat-compose" onsubmit="return sendSalesAssistantMessage(event);">
      <input type="text" id="sales-assistant-input" placeholder="Ask about a lead, opportunity, quote, or pursuit..." autocomplete="off"/>
      <button class="btn brand" type="submit">Ask</button>
    </form>
  </div>
</div>
<style>
.agent-modal{position:fixed;inset:0;background:rgba(6,16,41,.6);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:999;}
.agent-modal.visible{opacity:1;pointer-events:auto;}
.agent-modal-content{width:min(480px,90vw);background:#fff;border-radius:20px;padding:18px;box-shadow:0 30px 70px rgba(0,0,0,.35);display:flex;flex-direction:column;gap:12px;}
.agent-modal-content header{display:flex;justify-content:space-between;align-items:center;}
.chat-feed{list-style:none;margin:0;padding:0;height:280px;overflow:auto;border:1px solid var(--rw-border);border-radius:14px;padding:10px;display:flex;flex-direction:column;gap:10px;background:#f8fafc;}
.chat-feed .msg{display:flex;}
.chat-feed .msg span{padding:10px 12px;border-radius:14px;font-size:13px;line-height:1.3;max-width:90%;}
.chat-feed .msg.user{justify-content:flex-end;}
.chat-feed .msg.user span{background:#ffeadb;color:#7c2d12;}
.chat-feed .msg.assistant span{background:#0f172a;color:#fff;}
.chat-compose{display:flex;gap:10px;}
.chat-compose input{flex:1;border:1px solid var(--rw-border);border-radius:12px;padding:10px 12px;font-size:14px;}
</style>
<div class="footer">© Demo – Redwood-inspired mockup</div></div>
</body>
</html>
.stage-boards{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;}
.stage-panel{border:1px solid var(--rw-border);border-radius:20px;padding:16px;background:#f5f8ff;}
.stage-header{display:flex;justify-content:space-between;align-items:flex-start;gap:10px;}
.stage-desc{margin:8px 0 12px;font-size:13px;color:#475569;}
.stage-chip{border-radius:12px;padding:6px 12px;font-size:12px;font-weight:600;background:#e0edff;color:#0f3066;}
.stage-steps{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px;}
.stage-steps li{background:#fff;border-radius:12px;padding:10px;border:1px dashed rgba(15,48,102,.25);font-size:13px;}
.stage-steps li strong{color:#0f172a;display:block;}
.workflow-callouts{margin-top:12px;font-size:12px;color:#0f172a;display:flex;flex-direction:column;gap:6px;}
.workflow-callouts span{padding:6px 10px;border-radius:10px;background:#fff;border:1px solid rgba(255,122,24,.3);}
