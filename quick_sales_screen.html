<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Quick Sales Screen for Existing Customers</title>
<link rel="stylesheet" href="https://static.oracle.com/cdn/jet/18.1.0-2510.4/default/css/redwood/oj-redwood-min.css" id="oj-redwood-cdn" type="text/css" />
<link rel="stylesheet" href="assets/redwood.css" />
<link rel="stylesheet" href="assets/vbcs-shared.css" /><script defer src="assets/app.js"></script>
<script defer src="assets/quick_sales_data.js"></script>
</head>
<body class="lead-landing oracle-fusion-skin">

<header class="miconnex-bar">
  <div class="logo-mark">
    <span class="logo-icon argano">A</span>
    <div>
      <div class="logo-text">Argano</div>
      <div class="logo-sub">Connected Cloud</div>
    </div>
  </div>
  <div class="bar-actions">
    <div class="persona-dropdown">
      <label>Persona</label>
      <select class="persona-select">
        <option value="all">All Persona</option>
        <option value="rep">Sales Rep</option>
        <option value="manager">Sales Manager</option>
        <option value="exec">Executive</option>
        <option value="delivery">Delivery</option>
        <option value="partner">Partner</option>
      </select>
    </div>

    <button class="ghost-btn small">Help</button>
    <button class="ghost-btn small">Support</button>
    <div class="avatar-chip">CK</div>
  </div>
</header>
<nav class="quick-nav auto-nav">
  <div class="nav-group">
    <div class="nav-label">Sales &amp; Delivery Journey</div>
    <div class="nav-items">    <a href="index.html">Overview</a>    <a href="Easy_Start_Flows.html">Easy Start</a>    <a href="sales_cloud.html">Sales Flow</a>    <a href="sales_tools.html">Sales Tools</a>    <a href="cx_lead.html">Lead</a>    <a href="cx_opportunity.html">Opportunity</a>    <a href="ppm_pursuit.html">PPM Pursuit</a>    <a href="ppm_construction.html">PPM Construction</a>
      <a href="quick_sales_screen.html" class="accent active">Quick Sales Screen</a>
    </div>
  </div>
  <div class="nav-group">
    <div class="nav-label">Insights &amp; Toolkit</div>
    <div class="nav-items">    <a href="analytics.html">Analytics</a>    <a href="forecasting_pipeline.html">Forecasting</a>    <a href="integration_features.html">Integration</a>    <a href="sales_process_visualization.html">Process Visualization</a>    <a href="results_driven.html">Results Driven</a>    <a href="executive_command_center.html">Exec Command</a>    <a href="account_360.html">Account 360</a>    <a href="partner_hub.html">Partner Hub</a>    <a href="revenue_intelligence.html">Revenue Intelligence</a>    <a href="field_mobile_snapshot.html">Field Mobile</a>    <a href="sales_ppm_sync.html">Sales-PPM</a>    <a href="quote_to_docusign.html">Quote to DocuSign</a>    <a href="pursuit_project.html">Pursuit Project</a>
    </div>
  </div>
</nav>

<div id="aria-live" aria-live="polite" aria-atomic="true" class="visually-hidden"></div>

<div class="shell qs-shell">
  <section class="qs-hero">
    <p class="eyebrow">Quick Sales</p>
    <h1>Quick Sales Screen for Existing Customers</h1>
    <p class="qs-hero-sub">Show the streamlined experience tailored for short-cycle expansions. For existing customers with established relationships and pre-approved terms, the Quick Sales screen enables a condensed three-stage progression that keeps controls intact while moving fast.</p>
    <div class="qs-hero-metrics">
      <div class="metric">
        <span class="metric-label">Active Accounts</span>
        <strong id="qsAccountCount">0</strong>
      </div>
      <div class="metric">
        <span class="metric-label">Ready Quotes</span>
        <strong id="qsQuoteCount">0</strong>
      </div>
      <div class="metric">
        <span class="metric-label">Cycle Target</span>
        <strong id="qsCycleTime">3-stage fast lane</strong>
      </div>
    </div>
    <div class="hero-search">
      <input type="search" placeholder="Search existing accounts &amp; needs" aria-label="Search existing accounts for Quick Sales" id="qsHeroSearch"/>
      <button type="button" class="btn primary" onclick="openPreview()">Launch Flow Builder</button>
      <button type="button" class="btn" onclick="startInteractiveFlow()">Interactive Demo</button>
    </div>
    <div class="qs-search-results" id="qsSearchResults" aria-live="polite" aria-atomic="true" hidden></div>
    <div class="qs-hero-actions">
      <button type="button" class="btn" onclick="openQuickSalesMobile()">Mobile Preview</button>
      <a class="btn" href="sales_cloud.html">Back to Sales Flow</a>
    </div>
  </section>

  <section class="qs-ai-summary">
    <h3>Oracle GenAI Quick Path Guidance</h3>
    <div id="qsAiSummaryText" class="ai-copy">Use GenAI to recap the three-stage process, highlight signals, and suggest the next Quick Sales actions.</div>
    <div class="ai-actions">
      <button type="button" class="btn brand" onclick="return runQuickSalesAISummary('overview');">Overview</button>
      <button type="button" class="btn" onclick="return runQuickSalesAISummary('risk');">Risks &amp; Signals</button>
      <button type="button" class="btn" onclick="return runQuickSalesAISummary('action');">Smart Actions</button>
    </div>
  </section>

  <section class="card qs-workspace">
    <div class="body">
      <div class="qs-deal-header">
        <div>
          <p class="eyebrow">Active Opportunity</p>
          <h2>Skyline Microgrid Expansion</h2>
          <p>Account <strong>Skyline Renewables</strong> &middot; Owner <strong>Jessica Brooks</strong> &middot; Deal Type <strong>Expansion</strong></p>
        </div>
        <div class="qs-header-actions">
          <button class="btn primary" id="qsHeroLog">Log Activity</button>
          <button class="btn" id="qsHeroSend">Send Update</button>
          <button class="btn" id="qsHeroSalesFlow">Open in Sales Flow</button>
        </div>
      </div>
      <div class="qs-header-grid">
        <label>Stage
          <select>
            <option>Evaluation</option>
            <option>Proposal</option>
            <option>Negotiation</option>
          </select>
        </label>
        <label>Probability
          <input type="number" value="65"/>
        </label>
        <label>Close Date
          <input type="date" value="2024-07-31"/>
        </label>
        <label>Amount
          <input type="text" value="$1,250,000"/>
        </label>
        <label>Team
          <input type="text" value="AE, SC, Delivery Prep"/>
        </label>
      </div>
      <div class="qs-deal-metrics">
        <div>
          <span class="label">Deal Health</span>
          <strong>High</strong>
          <p>AI Confidence 82%</p>
        </div>
        <div>
          <span class="label">Engagement</span>
          <strong>Active</strong>
          <p>Last touch 2h ago</p>
        </div>
        <div>
          <span class="label">Compliance</span>
          <strong>Pass</strong>
          <p>All required fields captured</p>
        </div>
        <div>
          <span class="label">Forecast</span>
          <strong>Best Case</strong>
          <p>Submit toggle enabled</p>
        </div>
      </div>
      <div class="qs-workspace-columns">
        <div class="qs-column primary">
          <div class="qs-insights">
          <div class="section-head">
            <div>
              <p class="eyebrow">Sales Insights &amp; Deal Health</p>
              <h3>AI Recommendations</h3>
            </div>
            <button class="btn" id="qsInsightsRefresh">Refresh</button>
          </div>
            <ul>
              <li><strong>Stage aging:</strong> Evaluation for 9 days. Prep proposal to stay on forecast.</li>
              <li><strong>Stakeholder gap:</strong> No finance contact logged &mdash; add approver before pricing review.</li>
              <li><strong>Next Action:</strong> Send summarized scope + pricing recap before Friday.</li>
              <li><strong>Risk:</strong> Activity gap on influencer &ldquo;G. Singh&rdquo; &mdash; log touchpoint.</li>
            </ul>
          </div>
      <div class="qs-activity">
        <div class="section-head">
          <div>
            <p class="eyebrow">Activity &amp; Task Management</p>
            <h3>Timeline</h3>
          </div>
          <button class="btn" id="qsViewAllActivity">View All</button>
        </div>
      <ul class="qs-activity-feed" id="qs-activity-feed">
        <li><span class="time">09:24</span><div><strong>Email</strong> Sent follow-up with updated BOM.</div></li>
        <li><span class="time">Yesterday</span><div><strong>Meeting</strong> Executive briefing with Skyline board.</div></li>
        <li><span class="time">Mon</span><div><strong>Note</strong> AI flagged missing finance approver.</div></li>
      </ul>
      <form class="qs-activity-form" id="qs-activity-form">
        <label>Log activity
          <select id="qs-activity-type">
            <option>Call</option>
            <option>Email</option>
            <option>Meeting</option>
            <option>Internal Note</option>
          </select>
        </label>
        <textarea rows="2" placeholder="Summarize outcome or next step" id="qs-activity-notes"></textarea>
        <div class="qs-activity-actions">
          <label><input type="checkbox" id="qs-follow-task"/> Create follow-up task</label>
          <button class="btn primary" type="button" id="qsLogActivityBtn">Save Activity</button>
        </div>
      </form>
    </div>
        </div>
        <div class="qs-column secondary">
      <div class="qs-validation">
        <div class="section-head">
          <div>
            <p class="eyebrow">Compliance &amp; Validation</p>
            <h3>Checks</h3>
          </div>
        </div>
            <ul>
              <li class="pass">All mandatory fields completed</li>
              <li class="pass">Contract value within approval threshold</li>
              <li class="review">Contact validation required &mdash; missing Finance approver</li>
        </ul>
        <button class="btn" id="qsRequestReview">Request Review</button>
          </div>
          <div class="qs-stakeholder">
            <div class="section-head">
              <p class="eyebrow">Stakeholder View</p>
              <h3>Contacts &amp; Roles</h3>
            </div>
            <table>
              <thead><tr><th>Name</th><th>Role</th><th>Status</th></tr></thead>
              <tbody>
                <tr><td>Lena Ortiz</td><td>Decision Maker</td><td>Last touch 2h ago</td></tr>
                <tr><td>Gurmeet Singh</td><td>Coach</td><td>Last touch 5d ago</td></tr>
                <tr><td>David Chan</td><td>Finance</td><td>Not engaged</td></tr>
              </tbody>
            </table>
            <button class="btn" id="qsAddStakeholder">Add Stakeholder</button>
          </div>
          <div class="qs-revenue">
            <div class="section-head">
              <p class="eyebrow">Revenue &amp; Forecast</p>
              <h3>Forecast Planning</h3>
            </div>
            <table>
              <thead><tr><th>Period</th><th>Amount</th><th>Probability</th></tr></thead>
              <tbody>
                <tr><td>Q3</td><td>$850,000</td><td>65%</td></tr>
                <tr><td>Q4</td><td>$400,000</td><td>35%</td></tr>
              </tbody>
            </table>
            <label class="qs-checkbox"><input type="checkbox" id="qsSubmitForecast" checked/> Submit to Forecast</label>
          </div>
          <div class="qs-docs">
            <div class="section-head">
              <p class="eyebrow">Documents &amp; Templates</p>
              <h3>Assets</h3>
            </div>
            <ul>
              <li>Executive Summary.pdf <button class="btn" type="button" data-doc-action="view" data-doc-name="Executive Summary.pdf">View</button></li>
              <li>Proposal Template.docx <button class="btn" type="button" data-doc-action="generate" data-doc-name="Proposal Template.docx">Generate</button></li>
              <li>SOW Draft.docx <button class="btn" type="button" data-doc-action="docusign" data-doc-name="SOW Draft.docx">Send to DocuSign</button></li>
            </ul>
          </div>
          <div class="qs-manager">
            <div class="section-head">
              <p class="eyebrow">Manager Review Mode</p>
              <h3>Coaching &amp; Overrides</h3>
            </div>
            <label>Manager notes<textarea rows="2" placeholder="Drop coaching notes or approvals here"></textarea></label>
            <label class="qs-checkbox"><input type="checkbox"/> Override rep confidence (set to 70%)</label>
            <label class="qs-checkbox"><input type="checkbox"/> Approve for forecast commit</label>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="card qs-purpose-card">
    <div class="body">
      <div class="qs-purpose-grid">
        <div>
          <p class="eyebrow">Why Quick Sales</p>
          <h3>Purpose</h3>
          <p>The Quick Sales Screen is a consolidated workspace that keeps reps, managers, and AI assistants aligned without hopping between CX pages.</p>
          <ul class="qs-purpose-list">
            <li>Single canvas for every opportunity action.</li>
            <li>Reduces clicks + navigation while improving data quality.</li>
            <li>Embeds sales intelligence and next-step guidance inline.</li>
            <li>Supports compliance, forecasting, and customer engagement in one view.</li>
          </ul>
        </div>
        <div class="qs-callout">
          <h4>Ideal Outcomes</h4>
          <p>Faster pipeline hygiene, better forecast accuracy, and a modern workspace that mirrors Oracle Fusion UX.</p>
          <div class="qs-callout-points">
            <span>Inline editing</span>
            <span>Compliance-ready</span>
            <span>AI insights</span>
            <span>Manager review</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="card qs-highlights">
    <div class="body">
      <div class="quick-grid">
        <div>
          <h3>Smart Account Intelligence</h3>
          <ul>
            <li>Existing account selector with search and favorites.</li>
            <li>Prior project history &amp; performance summary.</li>
            <li>Contact roles &amp; decision maker directory.</li>
            <li>Relationship timeline plus engagement tracking.</li>
          </ul>
        </div>
        <div>
          <h3>Accelerated Transaction Tools</h3>
          <ul>
            <li>Current needs / expansion request form.</li>
            <li>Pre-approved pricing &amp; rate cards.</li>
            <li>Quick Quote launch with CPQ integration.</li>
            <li>Short-form opportunity creation with minimal fields.</li>
          </ul>
        </div>
        <div>
          <h3>Condensed 3-Stage Progression</h3>
          <ol class="quick-steps">
            <li><strong>Account + Need Confirmation:</strong> Validate the existing relationship, confirm scope, and document the expansion trigger.</li>
            <li><strong>Pre-Built Quote + Approval:</strong> Launch the Quick Quote path with embedded controls, auto-attach documentation, and route fast approvals.</li>
            <li><strong>Execution &amp; Handoff:</strong> Convert to an opportunity with the required artifacts attached, then hand off to delivery without re-keying.</li>
          </ol>
        </div>
      </div>
    </div>
  </section>

  <section class="card qs-feature-blueprint">
    <div class="body">
      <p class="eyebrow">Quick Sales Screen &mdash; Ideal Feature Set &amp; Workflow Blueprint</p>
      <div class="qs-feature-grid">
        <div class="qs-feature-card">
          <h3>Deal Header &amp; Key Fields</h3>
          <p>Top ribbon shows Opportunity &amp; Account names, stage, probability, amount, team, and deal type. All fields support inline editing with auto-save.</p>
        </div>
        <div class="qs-feature-card">
          <h3>Compliance &amp; Validation</h3>
          <p>Automated checks (Pass / Review / Fail), alerts for missing contacts, and request-review workflows that keep data trustworthy.</p>
        </div>
        <div class="qs-feature-card">
          <h3>Sales Insights &amp; Deal Health</h3>
          <p>AI health scores, activity gaps, risk alerts, and recommended Smart Actions tell the story at a glance.</p>
        </div>
        <div class="qs-feature-card">
          <h3>Activity &amp; Task Management</h3>
          <p>Unified timeline for meetings, emails, notes, plus quick buttons to log a call, add follow-ups, or assign reps.</p>
        </div>
        <div class="qs-feature-card">
          <h3>Stakeholder View</h3>
          <p>Internal + external contacts with role chips, last-touch info, and quick-add capability to capture missing influencers.</p>
        </div>
        <div class="qs-feature-card">
          <h3>Revenue &amp; Forecast Panel</h3>
          <p>Inline revenue lines, multi-period planning, probability-based forecast, and a “Submit to Forecast” toggle.</p>
        </div>
        <div class="qs-feature-card">
          <h3>Documents &amp; Templates</h3>
          <p>Attachment viewer, proposal/quote template launcher, version tracking, and hooks into DocuSign or other services.</p>
        </div>
        <div class="qs-feature-card">
          <h3>Manager Review Mode</h3>
          <p>Confidence comparisons, coaching notes, approvals, and forecast overrides &mdash; perfect for pipeline inspection meetings.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="card qs-flows-card">
    <div class="body">
      <p class="eyebrow">Quick Flows</p>
      <h3>Demo-ready click paths</h3>
      <div class="qs-flows-grid">
        <div>
          <h4>Flow 1 &ndash; Fast Opportunity Creation</h4>
          <p>Use minimal fields to spin up a deal, hit validations instantly, and jump directly into the Quick Sales view.</p>
        </div>
        <div>
          <h4>Flow 2 &ndash; Daily Pipeline Update</h4>
          <p>Update stage, amount, close date, review AI insights, clear risks, and submit for manager review.</p>
        </div>
        <div>
          <h4>Flow 3 &ndash; Deal Health Review</h4>
          <p>Open a deal, inspect health scores and activity gaps, then create tasks straight from the insights panel.</p>
        </div>
        <div>
          <h4>Flow 4 &ndash; Forecast Submission</h4>
          <p>Edit revenue lines, confirm probability, submit to forecast, and let managers override/approve when needed.</p>
        </div>
        <div>
          <h4>Flow 5 &ndash; Document Prep</h4>
          <p>Generate proposals, quotes, or SOWs from the documents panel and push them into DocuSign or CPQ.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="card qs-sample-card">
    <div class="body">
      <div class="qs-sample-header">
        <div>
          <p class="eyebrow">Data Sandbox</p>
          <h3>Sample Leads &amp; Quotes</h3>
        </div>
        <button type="button" class="btn" id="show-sample-data" onclick="toggleSampleData()">Show Sample Leads &amp; Quotes</button>
      </div>
      <div id="sample-data-panel" class="qs-sample-panel" style="display:none">
        <h4>Sample Leads</h4>
        <div class="qs-sample-table" id="sample-leads"></div>
        <h4>Sample Quotes</h4>
        <div class="qs-sample-table" id="sample-quotes"></div>
      </div>
    </div>
  </section>

    <script>
    var qsSearchContext={};
    document.addEventListener('DOMContentLoaded', function(){
      initQuickSalesHero();
      initQuickSalesWorkspace();
    });

    function initQuickSalesHero(){
      var data = window.QUICK_SALES_DATA || {};
      var leads = data.leads || [];
      var quotes = data.quotes || [];
      var acct = document.getElementById('qsAccountCount');
      if(acct) acct.textContent = leads.length ? leads.length : '—';
      var quoteCount = document.getElementById('qsQuoteCount');
      if(quoteCount) quoteCount.textContent = quotes.length ? quotes.length : '—';
      var cycle = document.getElementById('qsCycleTime');
      if(cycle){
        var metaCycle = (data.meta && data.meta.cycleTarget) || '3-stage fast lane';
        cycle.textContent = metaCycle;
      }
      runQuickSalesAISummary('overview');
    }

    function runQuickSalesAISummary(mode){
      var target = document.getElementById('qsAiSummaryText');
      if(!target) return false;
      var data = window.QUICK_SALES_DATA || {};
      var leads = data.leads || [];
      var quotes = data.quotes || [];
      var summary = '';
      if(mode==='risk'){
        summary = '<strong>Risk watch:</strong> Ensure account confirmation is logged before skipping to pricing.<ul><li>'+leads.length+' active needs require validation.</li><li>Accelerated quotes still need approvals + documentation.</li><li>Prep PPM handoff artifacts so execution never rekeys.</li></ul>';
      }else if(mode==='action'){
        summary = '<strong>Smart Actions:</strong><ul><li>Launch Flow Builder to auto-fill account + quote context.</li><li>Use Interactive Demo for live narration of the 3 stages.</li><li>Trigger Mobile Preview to show field-ready approvals.</li></ul>';
      }else{
        summary = '<strong>Overview:</strong> '+leads.length+' existing customers with '+quotes.length+' ready-to-go quotes sit in the Quick Sales lane. Highlight how GenAI condenses Account Confirmation, Quote Approval, and Execution into one seamless story.';
      }
      target.innerHTML = summary;
      return false;
    }

    function initQuickSalesWorkspace(){
      var heroLog=document.getElementById('qsHeroLog');
      if(heroLog){
        heroLog.addEventListener('click', function(e){
          e.preventDefault();
          var form=document.getElementById('qs-activity-form');
          if(form){ form.scrollIntoView({behavior:'smooth',block:'center'}); var notes=document.getElementById('qs-activity-notes'); if(notes){ setTimeout(function(){ notes.focus(); }, 400); } }
        });
      }
      var heroSend=document.getElementById('qsHeroSend');
      if(heroSend){
        heroSend.addEventListener('click', function(e){
          e.preventDefault();
          notifyQuickSales('Update sent to Skyline stakeholders with latest summary.');
        });
      }
      var heroSalesFlow=document.getElementById('qsHeroSalesFlow');
      if(heroSalesFlow){
        heroSalesFlow.addEventListener('click', function(e){
          e.preventDefault();
          window.open('sales_cloud.html','_blank');
        });
      }
      var heroSearch=document.getElementById('qsHeroSearch');
      if(heroSearch){
        heroSearch.addEventListener('keypress', function(ev){
          if(ev.key==='Enter'){ ev.preventDefault(); runHeroSearch(heroSearch.value); }
        });
        heroSearch.addEventListener('blur', function(){
          if(heroSearch.value.trim()){ runHeroSearch(heroSearch.value); }
        });
      }
      var logBtn=document.getElementById('qsLogActivityBtn');
      if(logBtn){
        logBtn.addEventListener('click', function(e){
          e.preventDefault();
          handleActivitySubmit();
        });
      }
      var refreshBtn=document.getElementById('qsInsightsRefresh');
      if(refreshBtn){
        refreshBtn.addEventListener('click', function(e){
          e.preventDefault();
          notifyQuickSales('Insights refreshed using latest AI context.');
        });
      }
      var viewAll=document.getElementById('qsViewAllActivity');
      if(viewAll){
        viewAll.addEventListener('click', function(e){
          e.preventDefault();
          notifyQuickSales('Full activity stream opens in Oracle CX Sales list view.');
        });
      }
      var requestBtn=document.getElementById('qsRequestReview');
      if(requestBtn){
        requestBtn.addEventListener('click', function(e){
          e.preventDefault();
          notifyQuickSales('Compliance review requested &mdash; legal will respond shortly.');
        });
      }
      var addStake=document.getElementById('qsAddStakeholder');
      if(addStake){
        addStake.addEventListener('click', function(e){
          e.preventDefault();
          notifyQuickSales('Stakeholder placeholder added. Use Sales Flow to capture full details.');
        });
      }
      var submitForecast=document.getElementById('qsSubmitForecast');
      if(submitForecast){
        submitForecast.addEventListener('change', function(){
          var msg=this.checked?'Submitted to forecast.':'Removed from forecast.';
          notifyQuickSales(msg);
        });
      }
      document.querySelectorAll('[data-doc-action]').forEach(function(btn){
        btn.addEventListener('click', function(e){
          e.preventDefault();
          var action=btn.dataset.docAction;
          var name=btn.dataset.docName || 'document';
          var message='';
          switch(action){
            case 'view':
              message='Opening '+name+'...';
              break;
            case 'generate':
              message='Generating '+name+' via Quick Sales templates.';
              break;
            case 'docusign':
              message='Sending '+name+' to DocuSign.';
              break;
            default:
              message='Processing '+name;
          }
          notifyQuickSales(message);
        });
      });
    }

    function handleActivitySubmit(){
      var type=document.getElementById('qs-activity-type');
      var notes=document.getElementById('qs-activity-notes');
      var follow=document.getElementById('qs-follow-task');
      var feed=document.getElementById('qs-activity-feed');
      if(!feed || !type || !notes) return;
      var text=notes.value.trim() || 'Activity logged via Quick Sales workspace.';
      var li=document.createElement('li');
      li.innerHTML='<span class="time">'+new Date().toLocaleTimeString()+'</span><div><strong>'+type.value+'</strong> '+text+(follow && follow.checked?' &ndash; follow-up task added.':'')+'</div>';
      feed.insertBefore(li, feed.firstChild);
      while(feed.children.length>5){ feed.removeChild(feed.lastChild); }
      notes.value='';
      if(follow) follow.checked=false;
      notifyQuickSales('Activity captured on the Quick Sales timeline.');
    }

    function notifyQuickSales(message){
      if(typeof showToast==='function'){ showToast(message); }
      else alert(message.replace(/&mdash;/g,'—'));
    }

    function runHeroSearch(query){
      var trimmed=(query||'').trim();
      var heroInput=document.getElementById('qsHeroSearch'); if(heroInput) heroInput.value=trimmed;
      var panel=document.getElementById('qsSearchResults');
      if(panel){ panel.hidden=true; panel.innerHTML=''; }
      if(!trimmed){
        notifyQuickSales('Enter an account or need to search.');
        return;
      }
      var matches=(window.QUICK_SALES_DATA && window.QUICK_SALES_DATA.leads||[]).filter(function(lead){
        return (lead.accountName||'').toLowerCase().includes(trimmed.toLowerCase()) || (lead.customer||'').toLowerCase().includes(trimmed.toLowerCase());
      });
      if(matches.length){
        notifyQuickSales('Showing needs for '+matches[0].accountName+'. Scoped Quick Sales to that account.');
        qsSearchContext.leadId=matches[0].id;
        qsSearchContext.leadName=matches[0].accountName;
        if(quote){ qsSearchContext.quoteId=quote.id; } else { qsSearchContext.quoteId=''; }
        if(panel){
          var lead=matches[0];
          var quote=(window.QUICK_SALES_DATA && window.QUICK_SALES_DATA.quotes||[]).find(function(q){ return (q.accountName||'').toLowerCase().includes(trimmed.toLowerCase()); });
          panel.innerHTML='';
          var h=document.createElement('h4'); h.textContent='Search Results'; panel.appendChild(h);
          var summary=document.createElement('p'); summary.innerHTML='<strong>'+lead.accountName+'</strong> &mdash; Contacts: '+(lead.contact||'Unknown'); panel.appendChild(summary);
          if(quote){
            var list=document.createElement('ul');
            list.innerHTML='<li>Quote '+quote.id+' &middot; $'+(quote.amount||0).toLocaleString()+'</li><li>Status '+(quote.status||'Draft')+'</li>';
            panel.appendChild(list);
          }else{
            var empty=document.createElement('p'); empty.innerHTML='No quotes found &mdash; use Flow Builder to create one.'; panel.appendChild(empty);
          }
          var btn=document.createElement('button'); btn.type='button'; btn.className='btn'; btn.textContent='Open in Flow Builder';
          btn.addEventListener('click', function(){ openPreview(); });
          panel.appendChild(btn);
          panel.hidden=false;
        }
      }else{
        notifyQuickSales('No existing account found for "'+trimmed+'". Use Sales Flow to create one.');
        qsSearchContext={};
        if(panel){
          panel.innerHTML='';
          var title=document.createElement('h4'); title.textContent='No Results'; panel.appendChild(title);
          var body=document.createElement('p'); body.innerHTML='Could not locate an existing account named <strong>'+trimmed+'</strong>. Jump to Sales Flow to create it.'; panel.appendChild(body);
          var btn=document.createElement('button'); btn.type='button'; btn.className='btn'; btn.textContent='Open Sales Flow';
          btn.addEventListener('click', function(){ window.open('sales_cloud.html','_blank'); });
          panel.appendChild(btn);
          panel.hidden=false;
        }
      }
    }

    function toggleSampleData(){
      var panel = document.getElementById('sample-data-panel');
      if(!panel) return;
      if(panel.style.display==='none' || !panel.style.display){
        renderSampleData(); panel.style.display='block'; document.getElementById('show-sample-data').textContent='Hide Sample Data';
      } else { panel.style.display='none'; document.getElementById('show-sample-data').textContent='Show Sample Leads & Quotes'; }
    }

    function renderSampleData(){
      var leadsEl = document.getElementById('sample-leads');
      var quotesEl = document.getElementById('sample-quotes');
      if(!leadsEl || !quotesEl) return;
      var data = window.QUICK_SALES_DATA || {leads:[],quotes:[]};
      // render leads table
      var html = '<table style="width:100%;border-collapse:collapse"><thead><tr><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">ID</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Customer</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Account Name</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Contact</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Title</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Status</th></tr></thead><tbody>';
      data.leads.forEach(function(l){ html += '<tr><td style="padding:6px;border-bottom:1px solid #eee">'+l.id+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(l.customer||'')+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(l.accountName||'')+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(l.contact||'')+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(l.title||'')+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(l.status||'')+'</td></tr>'; });
      html += '</tbody></table>';
      leadsEl.innerHTML = html;
      // render quotes table
      var qhtml = '<table style="width:100%;border-collapse:collapse"><thead><tr><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">ID</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Customer</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Account Name</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Ref</th><th style="text-align:right;padding:6px;border-bottom:1px solid var(--rw-border)">Amount</th><th style="text-align:left;padding:6px;border-bottom:1px solid var(--rw-border)">Status</th></tr></thead><tbody>';
      data.quotes.forEach(function(q){ qhtml += '<tr><td style="padding:6px;border-bottom:1px solid #eee">'+q.id+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(q.customer||'')+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(q.accountName||'')+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(q.ref||'')+'</td><td style="padding:6px;border-bottom:1px solid #eee;text-align:right">$'+(q.amount||0).toLocaleString()+'</td><td style="padding:6px;border-bottom:1px solid #eee">'+(q.status||'')+'</td></tr>'; });
      qhtml += '</tbody></table>';
      quotesEl.innerHTML = qhtml;
    }
    function presetQuickSales(){
      openPreview();
    }

    // Preview modal management
    function openPreview(){
      try{
        populatePreviewModal();
        if(typeof showToast==='function') showToast('Launching Quick Sales flow...');
        if(window.ModalManager && typeof ModalManager.showModal === 'function'){
          try{ ModalManager.showModal('qs-modal-preview'); return; }catch(e){ console.warn('openPreview modalManager.showModal failed', e); }
        }
      }catch(e){ console.warn('openPreview', e); }
      // fallback: show the preview overlay directly
      try{
        var ov = document.getElementById('qs-modal-preview');
        if(ov){
          ov.style.display = 'flex';
          ov.setAttribute('aria-hidden','false');
          // focus first control
          setTimeout(function(){ var f = ov.querySelector('select,textarea,input,button'); if(f) f.focus(); }, 50);
          // add ESC handler
          if(!ov._escHandler){
            ov._escHandler = function(e){ if(e.key==='Escape' || e.key==='Esc'){ ov.style.display='none'; ov.setAttribute('aria-hidden','true'); document.removeEventListener('keydown', ov._escHandler); } };
            document.addEventListener('keydown', ov._escHandler);
          }
          return;
        }
      }catch(err){ console.warn('preview fallback failed', err); }
      // last resort, create the small fallback flow
      createFallbackFlow();
    }

    function populatePreviewModal(){
      var leads = (window.QUICK_SALES_DATA && window.QUICK_SALES_DATA.leads) || [];
      var quotes = (window.QUICK_SALES_DATA && window.QUICK_SALES_DATA.quotes) || [];
      var leadSel = document.getElementById('preview-lead');
      var quoteSel = document.getElementById('preview-quote');
      if(leadSel){
        leadSel.innerHTML = '<option value="">-- pick a lead --</option>' + leads.map(function(l){ var acct = l.accountName || l.account || l.customer || ''; return '<option value="'+l.id+'">'+l.id+' - '+acct+' ('+(l.contact||'')+')'+'</option>'; }).join('');
        if(qsSearchContext.leadId){ leadSel.value=qsSearchContext.leadId; }
      }
      if(quoteSel){
        quoteSel.innerHTML = '<option value="">-- pick a quote --</option>' + quotes.map(function(q){ var acct = q.accountName || q.account || q.customer || ''; return '<option value="'+q.id+'">'+q.id+' - '+acct+' - $'+(q.amount||0).toLocaleString()+'</option>'; }).join('');
        if(qsSearchContext.quoteId){ quoteSel.value=qsSearchContext.quoteId; }
      }
    }

    function applyPreviewAll(){
      try{
        var leadId = document.getElementById('preview-lead').value;
        var leadNotes = document.getElementById('preview-lead-notes').value;
        var leadConfirm = document.getElementById('preview-lead-confirm').checked;
        var quoteId = document.getElementById('preview-quote').value;
        var quoteApprove = document.querySelector('input[name="preview-quote-approve"]:checked');
        var conv = document.getElementById('preview-convert').checked;
        var toCPQ = document.getElementById('preview-cpq').checked;
        var toPursuit = document.getElementById('preview-pursuit').checked;

        if(leadConfirm && window.RWD && typeof RWD.updateSalesFlow==='function'){
          RWD.updateSalesFlow('lead','Qualified','QS Flow: '+(leadNotes||'Account confirmed'));
        }
        if(quoteApprove && quoteApprove.value==='yes' && window.RWD && typeof RWD.updateSalesFlow==='function'){
          RWD.updateSalesFlow('quote','Approved','QS Flow: quote approved');
        }
        if(conv && window.RWD && typeof RWD.updateSalesFlow==='function'){
          RWD.updateSalesFlow('opportunity','Closed Won','QS Flow: converted via preview');
        }
        if(toCPQ && window.RWD && typeof RWD.runOICJob==='function'){
          RWD.runOICJob('QS Flow: Push to CPQ');
        }
        if(toPursuit){
          if(window.RWD && typeof RWD.createPursuitViaOIC==='function'){
            RWD.createPursuitViaOIC(function(){ if(typeof showToast==='function') showToast('Pursuit created via OIC'); });
          } else if(window.RWD && typeof RWD.get==='function'){ var s=RWD.get(); s.logs=s.logs||[]; s.logs.unshift('['+new Date().toLocaleString()+'] QS Flow: Push to Pursuit simulated'); if(typeof RWD.set==='function') RWD.set(s); }
        }
        if(typeof showToast==='function') showToast('Quick Sales flow state applied'); else alert('Quick Sales flow state applied');
        closeQuickPreview();
      }catch(e){ console.error('applyPreviewAll', e); if(typeof showToast==='function') showToast('Flow apply failed: '+(e && e.message)); }
    }
  </script>

  <!-- Quick Sales detail modals (in-page) -->
  <div id="qs-modals" style="display:none">
    <style>
      .qs-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;z-index:60}
      .qs-modal{width:min(760px,94%);background:var(--rw-surface);border-radius:12px;padding:18px;border:1px solid var(--rw-border);box-shadow:0 8px 24px rgba(2,6,23,.3)}
      .qs-modal h2{margin-top:0}
      .qs-mobile-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:none;align-items:center;justify-content:center;z-index:110}
      .qs-mobile-phone{max-width:420px;width:90%;background:#05070c;border-radius:32px;padding:16px;border:6px solid #1f2937;box-shadow:0 28px 50px rgba(2,6,23,.55)}
      .qs-mobile-screen{background:#fff;border-radius:24px;padding:20px;display:flex;flex-direction:column;gap:14px;min-height:520px}
      .qs-mobile-card{border:1px solid var(--rw-border);border-radius:16px;padding:12px;box-shadow:0 4px 12px rgba(15,23,42,.08)}
      .qs-mobile-card h3{margin:0 0 4px;font-size:16px}
      .qs-mobile-card p{margin:0;font-size:13px;color:var(--rw-muted)}
      .qs-mobile-actions{display:flex;justify-content:flex-end}
      .qs-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
    </style>

    <div id="qs-modal-1" class="qs-overlay" style="display:none" aria-hidden="true">
      <div class="qs-modal" role="dialog" aria-modal="true" aria-labelledby="qs1-title" tabindex="-1">
        <h2 id="qs1-title">Account + Need Confirmation</h2>
        <p>Validate the existing relationship, confirm scope, and document the expansion trigger. Pick an account, review recent projects, and capture the expansion reason.</p>
        <h4>Example Fields</h4>
        <ul>
          <li>Account selector (search + favorites)</li>
          <li>Recent project history summary</li>
          <li>Primary contact verification</li>
          <li>Expansion trigger (capex, maintenance, regulation)</li>
        </ul>
        <div class="qs-actions">
          <button type="button" class="btn" onclick="closeQuickModal(1)">Close</button>
          <button type="button" class="btn primary" id="qs1-yes" onclick="confirmAccount(true)">Yes</button>
          <button type="button" class="btn" id="qs1-no" onclick="confirmAccount(false)">No</button>
          <button type="button" class="btn" onclick="nextQuickStep(1)">Next</button>
        </div>
      </div>
    </div>

    <div id="qs-modal-2" class="qs-overlay" style="display:none" aria-hidden="true">
      <div class="qs-modal" role="dialog" aria-modal="true" aria-labelledby="qs2-title" tabindex="-1">
        <h2 id="qs2-title">Pre-Built Quote & Approval</h2>
        <p>Launch the Quick Quote path with embedded controls, auto-attach documentation, and route fast approvals. Use this screen to pick a price template and submit for approval.</p>
        <h4>Example Controls</h4>
        <ul>
          <li>Price template selector</li>
          <li>Auto-attach supporting documents</li>
          <li>Approval routing (fast lanes)</li>
          <li>Review & submit button</li>
        </ul>
        <div class="qs-actions">
          <button type="button" class="btn" onclick="showQuickModal(1)">Back</button>
          <button type="button" class="btn" onclick="closeQuickModal(2)">Close</button>
          <button type="button" class="btn" id="qs2-check" onclick="checkQuote()">Check Quote</button>
          <button type="button" class="btn" id="qs2-approve-yes" onclick="approveQuote(true)" disabled>Approve: Yes</button>
          <button type="button" class="btn" id="qs2-approve-no" onclick="approveQuote(false)" disabled>Approve: No</button>
          <button type="button" class="btn" onclick="nextQuickStep(2)">Next</button>
        </div>
      </div>
    </div>

    <div id="qs-modal-3" class="qs-overlay" style="display:none" aria-hidden="true">
      <div class="qs-modal" role="dialog" aria-modal="true" aria-labelledby="qs3-title" tabindex="-1">
        <h2 id="qs3-title">Execution & Handoff</h2>
        <p>Convert to an opportunity with the required artifacts attached, then hand off to delivery without re-keying. This simulates conversion and PPM handoff.</p>
        <h4>Example Actions</h4>
        <ul>
          <li>Convert quick quote into opportunity</li>
          <li>Attach proposal and project artifacts</li>
          <li>Run integration to PPM (OIC job)</li>
          <li>Notify delivery and create pursuit record</li>
        </ul>
        <div class="qs-actions">
          <button type="button" class="btn" onclick="showQuickModal(2)">Back</button>
          <button type="button" class="btn" onclick="closeQuickModal(3)">Close</button>
          <button type="button" class="btn" onclick="convertOpportunity()">Convert Opportunity</button>
          <button type="button" class="btn" onclick="pushToCPQ()">Push to CPQ</button>
          <button type="button" class="btn primary" onclick="pushToPursuit()">Push to Pursuit</button>
        </div>
      </div>
    </div>
    
    <div id="qs-modal-preview" class="qs-overlay" style="display:none" aria-hidden="true">
      <div class="qs-modal qs-preview-modal" role="dialog" aria-modal="true" aria-labelledby="qs-preview-title" tabindex="-1">
        <div class="qs-preview-header">
          <div>
            <p class="eyebrow">Quick Sales Builder</p>
            <h2 id="qs-preview-title">Quick Sales Flow Builder</h2>
            <p class="muted">Mix and match sample data to narrate the 3-stage Quick Sales journey.</p>
          </div>
          <button type="button" class="ghost-btn small" onclick="closeQuickPreview()">Close &times;</button>
        </div>
        <div class="qs-preview-grid">
          <div class="qs-preview-stage">
            <div class="qs-stage-head">
              <span class="qs-stage-label">Stage 1</span>
              <h3>Account + Need</h3>
            </div>
            <label class="qs-field-label">Pick a lead
              <select id="preview-lead" class="qs-field"><option value="">-- pick a lead --</option></select>
            </label>
            <label class="qs-field-label">Notes
              <textarea id="preview-lead-notes" rows="2" class="qs-field"></textarea>
            </label>
            <label class="qs-checkbox"><input type="checkbox" id="preview-lead-confirm"> Confirm account &amp; need</label>
          </div>
          <div class="qs-preview-stage">
            <div class="qs-stage-head">
              <span class="qs-stage-label">Stage 2</span>
              <h3>Pre-Built Quote</h3>
            </div>
            <label class="qs-field-label">Pick a quote
              <select id="preview-quote" class="qs-field"><option value="">-- pick a quote --</option></select>
            </label>
            <div class="qs-radio-group">
              <span>Approval</span>
              <label><input type="radio" name="preview-quote-approve" value="yes"> Yes</label>
              <label><input type="radio" name="preview-quote-approve" value="no"> No</label>
            </div>
            <p class="qs-stage-note">Fast-lane approvals auto-attach artifacts for compliance.</p>
          </div>
          <div class="qs-preview-stage">
            <div class="qs-stage-head">
              <span class="qs-stage-label">Stage 3</span>
              <h3>Execution &amp; Handoff</h3>
            </div>
            <div class="qs-checkbox-group">
              <label class="qs-checkbox"><input type="checkbox" id="preview-convert"> Convert to Opportunity</label>
              <label class="qs-checkbox"><input type="checkbox" id="preview-cpq"> Push to CPQ</label>
              <label class="qs-checkbox"><input type="checkbox" id="preview-pursuit"> Push to Pursuit</label>
            </div>
            <p class="qs-stage-note">GenAI preps the PPM handoff package with artifacts &amp; notifications.</p>
          </div>
        </div>
        <div class="qs-preview-actions">
          <button type="button" class="btn" onclick="closeQuickPreview()">Cancel</button>
          <button type="button" class="btn primary" onclick="applyPreviewAll()">Apply Flow Updates</button>
        </div>
      </div>
    </div>

  </div>
  </div>

    <script defer src="assets/modal.js"></script>
    <script>
      function closeQuickPreview(){
        var handled=false;
        if(window.ModalManager && typeof ModalManager.closeModal==='function'){
          try{ ModalManager.closeModal('qs-modal-preview'); handled=true; }catch(e){ console.warn('close preview modalManager', e); }
        }
        if(!handled){
          var ov=document.getElementById('qs-modal-preview');
          if(ov){
            ov.style.display='none';
            ov.setAttribute('aria-hidden','true');
            if(ov._escHandler){
              try{ document.removeEventListener('keydown', ov._escHandler); }catch(err){}
              ov._escHandler=null;
            }
          }
        }
      }
      function startInteractiveFlow(){
        try{
          if(typeof showToast==='function') showToast('Starting interactive flow...');
          if(typeof showQuickModal==='function'){
            try{ showQuickModal(1); return; }catch(e){ if(typeof showToast==='function') showToast('Error opening modal: '+(e && e.message)); }
          }
        }catch(e){ /* swallow */ }
        // Fallback: create a small inline overlay with the 3-stage buttons
        try{ createFallbackFlow(); }catch(err){ if(typeof showToast==='function') showToast('Interactive demo failed: '+(err && err.message)); else console.error('Interactive demo failed', err); }
      }

      function createFallbackFlow(){
        if(document.getElementById('qs-fallback-overlay')) return;
        var last = document.activeElement;
        var overlay = document.createElement('div');
        overlay.id = 'qs-fallback-overlay';
        overlay.style.position = 'fixed';
        overlay.style.inset = '0';
        overlay.style.background = 'rgba(0,0,0,0.45)';
        overlay.style.display = 'flex';
        overlay.style.alignItems = 'center';
        overlay.style.justifyContent = 'center';
        overlay.style.zIndex = 120;

        var dialog = document.createElement('div');
        dialog.id = 'qs-fallback-dialog';
        dialog.setAttribute('role','dialog');
        dialog.setAttribute('aria-modal','true');
        dialog.setAttribute('aria-labelledby','qs-fallback-title');
        dialog.tabIndex = -1;
        dialog.style.width = 'min(520px,94%)';
        dialog.style.maxWidth = '520px';
        dialog.style.background = 'var(--rw-surface, #fff)';
        dialog.style.border = '1px solid var(--rw-border, #ddd)';
        dialog.style.borderRadius = '10px';
        dialog.style.boxShadow = '0 12px 36px rgba(2,6,23,.28)';
        dialog.style.padding = '14px';

        dialog.innerHTML = '<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px"><strong id="qs-fallback-title">Quick Sales Flow</strong><button type="button" aria-label="Close fallback" style="background:transparent;border:0;font-size:20px;cursor:pointer" onclick="removeFallbackFlow()">×</button></div>'+
          '<div style="font-size:0.95em;margin-bottom:12px">Step through the condensed 3-stage progression.</div>'+
          '<div style="display:flex;flex-direction:column;gap:8px">'+
            '<button type="button" class="btn" id="fb-1" onclick="(function(){ if(typeof showQuickModal==\'function\'){ showQuickModal(1); removeFallbackFlow(); } else { confirmAccount(true); removeFallbackFlow(); } })()">1. Account: Yes</button>'+
            '<button type="button" class="btn" id="fb-2" onclick="(function(){ if(typeof showQuickModal==\'function\'){ showQuickModal(2); removeFallbackFlow(); } else { checkQuote(); removeFallbackFlow(); } })()">2. Quote: Check</button>'+
            '<button type="button" class="btn primary" id="fb-3" onclick="(function(){ if(typeof showQuickModal==\'function\'){ showQuickModal(3); removeFallbackFlow(); } else { convertOpportunity(); removeFallbackFlow(); } })()">3. Convert / Handoff</button>'+
          '</div>';

        overlay.appendChild(dialog);
        document.body.appendChild(overlay);
        // focus management + ESC to close
        setTimeout(function(){
          var f = dialog.querySelector('button, [tabindex]');
          if(f) f.focus(); else dialog.focus();
        }, 40);
        function onKey(e){ if(e.key==='Escape' || e.key==='Esc'){ removeFallbackFlow(); } }
        overlay._onKey = onKey;
        document.addEventListener('keydown', onKey);
        overlay._lastFocused = last;
        document.body.classList.add('modal-visible');
      }

      function removeFallbackFlow(){
        var overlay = document.getElementById('qs-fallback-overlay');
        if(!overlay) return;
        try{ if(overlay._onKey) document.removeEventListener('keydown', overlay._onKey); }catch(e){}
        var last = overlay._lastFocused;
        overlay.parentNode.removeChild(overlay);
        document.body.classList.remove('modal-visible');
        try{ if(last && typeof last.focus==='function') last.focus(); }catch(e){}
      }

      // Stage 1: Yes/No handler
      function confirmAccount(choice){
        try{
          var msg = choice ? 'Account & Need CONFIRMED' : 'Account & Need NOT confirmed';
          if(window.RWD && typeof RWD.get==='function'){
            var s = RWD.get(); s.logs = s.logs || [];
            s.logs.unshift('['+new Date().toLocaleString()+'] Quick Sales Stage1: '+msg);
            if(typeof RWD.set==='function') RWD.set(s);
          }
        }catch(e){console.warn(e)}
        if(typeof showToast==='function') showToast(msg); else alert(msg);
        // optionally mark lead qualified on Yes
        if(choice && window.RWD && typeof RWD.updateSalesFlow==='function'){
          RWD.updateSalesFlow('lead','Qualified','Quick Sales Stage 1: Account confirmed');
        }
      }

      // Stage 2: Check quote then enable approve
      function checkQuote(){
        var btnCheck = document.getElementById('qs2-check');
        var yes = document.getElementById('qs2-approve-yes');
        var no = document.getElementById('qs2-approve-no');
        if(btnCheck) btnCheck.textContent = 'Checking...';
        setTimeout(function(){
          if(btnCheck) btnCheck.textContent = 'Check Quote';
          if(yes) yes.disabled = false; if(no) no.disabled = false;
          try{ var s = RWD.get(); s.logs = s.logs || []; s.logs.unshift('['+new Date().toLocaleString()+'] Quick Sales Stage2: Quote checked'); if(typeof RWD.set==='function') RWD.set(s); }catch(e){}
          if(typeof showToast==='function') showToast('Quote check completed — you can Approve Yes/No'); else alert('Quote check completed — you can Approve Yes/No');
        }, 700);
      }

      function approveQuote(approved){
        try{
          var msg = approved ? 'Quote APPROVED' : 'Quote NOT approved';
          if(window.RWD && typeof RWD.get==='function'){
            var s = RWD.get(); s.logs = s.logs || [];
            s.logs.unshift('['+new Date().toLocaleString()+'] Quick Sales Stage2: '+msg);
            if(typeof RWD.set==='function') RWD.set(s);
          }
        }catch(e){}
        if(typeof showToast==='function') showToast(msg); else alert(msg);
        if(approved && window.RWD && typeof RWD.updateSalesFlow==='function'){
          RWD.updateSalesFlow('quote','Approved','Quick Sales Stage 2: Quote approved');
        }
      }

      // Stage 3 actions
      function convertOpportunity(){
        try{ if(window.RWD && typeof RWD.updateSalesFlow==='function'){ RWD.updateSalesFlow('opportunity','Closed Won','Quick Sales Stage 3: Converted via Quick Sales'); } }catch(e){}
        if(typeof showToast==='function') showToast('Opportunity converted (flow state updated)'); else alert('Opportunity converted (flow state updated)');
      }

      function pushToCPQ(){
        try{ if(window.RWD && typeof RWD.runOICJob==='function'){ RWD.runOICJob('Push to CPQ'); } else { var s=RWD.get(); s.logs=s.logs||[]; s.logs.unshift('['+new Date().toLocaleString()+'] Quick Sales Stage3: Push to CPQ simulated'); if(typeof RWD.set==='function') RWD.set(s);} }catch(e){}
        if(typeof showToast==='function') showToast('Push to CPQ simulated'); else alert('Push to CPQ simulated');
      }

      function pushToPursuit(){
        try{
          if(window.RWD && typeof RWD.createPursuitViaOIC==='function'){
            RWD.createPursuitViaOIC(function(){ if(typeof showToast==='function') showToast('Pursuit created via OIC (flow state updated)'); else alert('Pursuit created via OIC (flow state updated)'); });
          } else {
            if(window.RWD && typeof RWD.get==='function'){ var s=RWD.get(); s.logs=s.logs||[]; s.logs.unshift('['+new Date().toLocaleString()+'] Quick Sales Stage3: Push to Pursuit simulated'); if(typeof RWD.set==='function') RWD.set(s); }
            if(typeof showToast==='function') showToast('Push to Pursuit simulated'); else alert('Push to Pursuit simulated');
          }
        }catch(e){}
      }

      function openQuickSalesMobile(){
        var overlay=document.getElementById('qs-mobile-overlay');
        if(!overlay) return;
        overlay.style.display='flex';
        overlay.setAttribute('aria-hidden','false');
        document.body.classList.add('modal-visible');
        setTimeout(function(){ try{ overlay.querySelector('.qs-mobile-phone').focus(); }catch(e){} }, 40);
        if(typeof showToast==='function') showToast('Quick Sales mobile flow preview');
      }

      function closeQuickSalesMobile(){
        var overlay=document.getElementById('qs-mobile-overlay');
        if(!overlay) return;
        overlay.style.display='none';
        overlay.setAttribute('aria-hidden','true');
        document.body.classList.remove('modal-visible');
      }
    </script>

  <div class="qs-mobile-overlay" id="qs-mobile-overlay" aria-hidden="true">
    <div class="qs-mobile-phone" role="dialog" aria-modal="true" aria-labelledby="qsMobileTitle" tabindex="-1">
      <div class="qs-mobile-screen">
        <div style="display:flex;justify-content:space-between;font-size:12px;color:#475569">
          <span>09:41</span><span>5G &bull; 100%</span>
        </div>
        <h2 id="qsMobileTitle" style="margin:0;font-size:20px;text-align:center">Quick Sales Mobile Flow</h2>
        <div class="qs-mobile-card">
          <h3>Account + Need</h3>
          <p>Fox Crossing &middot; AI confirmed need</p>
          <button class="btn primary" style="width:100%;margin-top:6px">Convert with Quick Sales</button>
        </div>
        <div class="qs-mobile-card">
          <h3>Quote + Approval</h3>
          <p>Pre-built CPQ bundle ready &middot; 2 DocuSign approvals pending.</p>
          <button class="btn primary" style="width:100%;margin-top:6px">Send for Signature</button>
        </div>
        <div class="qs-mobile-card">
          <h3>Execution &amp; Handoff</h3>
          <p>Push pursuit to PPM and add project tasks.</p>
        </div>
        <div class="qs-mobile-actions">
          <button class="btn" onclick="closeQuickSalesMobile()">Close</button>
        </div>
      </div>
    </div>
  </div>


<div class="footer">© Demo – Redwood-inspired mockup</div></div>
  <nav class="vision-footer" aria-label="Global navigation">    <a href="sales_cloud.html">Sales Dashboard</a>    <a href="account_360.html">Accounts</a>    <a href="cx_lead.html">Leads</a>    <a href="cx_opportunity.html">Opportunities</a>    <a href="quote_to_docusign.html">Quotes</a>
  </nav>
</body>
</html>








