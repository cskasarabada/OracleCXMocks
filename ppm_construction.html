<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PPM Construction (Redwood)</title>
<link rel="stylesheet" href="https://static.oracle.com/cdn/jet/18.1.0-2510.4/default/css/redwood/oj-redwood-min.css" id="oj-redwood-cdn" type="text/css" />
<link rel="stylesheet" href="assets/redwood.css" />
<link rel="stylesheet" href="assets/vbcs-shared.css" />

<script defer src="assets/app.js"></script>
</head>
<body class="lead-landing oracle-fusion-skin">
<header class="miconnex-bar">
  <div class="logo-mark">
    <span class="logo-icon argano">A</span>
    <div>
      <div class="logo-text">Argano</div>
      <div class="logo-sub">Connected Cloud</div>
    </div>
  </div>
  <div class="bar-actions">
    <button class="ghost-btn small">Help</button>
    <button class="ghost-btn small">Support</button>
    <div class="avatar-chip">CK</div>
  </div>
</header>
<nav class="quick-nav auto-nav">
  <div class="nav-group">
    <div class="nav-label">Sales &amp; Delivery Journey</div>
    <div class="nav-items">    <a href="index.html">Overview</a>    <a href="Easy_Start_Flows.html">Easy Start</a>    <a href="sales_cloud.html">Sales Flow</a>    <a href="sales_tools.html">Sales Tools</a>    <a href="cx_lead.html">Lead</a>    <a href="cx_opportunity.html">Opportunity</a>    <a href="ppm_pursuit.html">PPM Pursuit</a>
      <a class="active" href="ppm_construction.html">PPM Construction</a>
      <a class="accent" href="quick_sales_screen.html">Quick Sales Screen</a>
    </div>
  </div>
  <div class="nav-group">
    <div class="nav-label">Insights &amp; Toolkit</div>
    <div class="nav-items">    <a href="analytics.html">Analytics</a>    <a href="forecasting_pipeline.html">Forecasting</a>    <a href="integration_features.html">Integration</a>    <a href="sales_process_visualization.html">Process Visualization</a>    <a href="results_driven.html">Results Driven</a>    <a href="executive_command_center.html">Exec Command</a>    <a href="account_360.html">Account 360</a>    <a href="partner_hub.html">Partner Hub</a>    <a href="revenue_intelligence.html">Revenue Intelligence</a>    <a href="field_mobile_snapshot.html">Field Mobile</a>    <a href="sales_ppm_sync.html">Sales-PPM</a>    <a href="quote_to_docusign.html">Quote to DocuSign</a>    <a href="pursuit_project.html">Pursuit Project</a>
    </div>
  </div>
</nav>



<div class="shell project-shell">

<section class="project-hero">
  <p class="eyebrow">PPM Construction</p>
  <h1 id="projectNameDisplay">Skyline Microgrid Delivery</h1>
  <div class="meta-row">
    <span class="pill">Status <strong id="projectStatusPill">Execution</strong></span>
    <span class="pill">Budget <strong id="projectBudgetPill">$0</strong></span>
    <span class="pill">Project Manager <strong>Maria Lopez</strong></span>
  </div>
  <div class="hero-details">
    <div>Pursuit <strong>Skyline Renewables</strong></div>
    <div>Last Update <strong id="projectLastUpdate">Today</strong></div>
  </div>
  <div class="hero-search">
    <input type="search" placeholder="Ask GenAI for a construction update"/>
    <button class="btn primary" onclick="return runConstructionAISummary('overview');">Summarize</button>
    <div class="ai-pill">AI ready &mdash; Site insights</div>
  </div>
</section>

<section class="project-ai-summary">
  <h3>Oracle GenAI Construction Briefing</h3>
  <div id="constructionAiSummaryText" class="ai-copy">Select a mode to summarize execution status, jobsite risks, or recommended Smart Actions.</div>
  <div class="ai-actions">
    <button class="btn brand" onclick="return runConstructionAISummary('overview');">Overview</button>
    <button class="btn" onclick="return runConstructionAISummary('risk');">Risks & Field Alerts</button>
    <button class="btn" onclick="return runConstructionAISummary('action');">Smart Actions</button>
  </div>
</section>

<div class="project-layout">
  <div class="project-main">
    <section class="project-board">
      <div class="board-column">
        <header><h3>Execution Focus</h3><a href="#" class="panel-link">View Schedule</a></header>
        <ul>
          <li><strong>Site Utilities</strong><div>Trenches inspected, await power tie-in.</div></li>
          <li><strong>Structural</strong><div>Steel set for modules 3 &amp; 4.</div></li>
          <li><strong>Commissioning</strong><div>QA punch prep for inverter testing.</div></li>
        </ul>
      </div>
      <div class="board-column">
        <header><h3>Field Insights</h3><a href="#" class="panel-link">View Notes</a></header>
        <ul>
          <li><strong>Weather Window</strong><div class="meta">48 hrs favorable &middot; accelerate roofing.</div></li>
          <li><strong>Subcontractor</strong><div class="meta">Electrical crew at 90% capacity.</div></li>
          <li><strong>Safety</strong><div class="meta">Zero incidents last 14 days.</div></li>
        </ul>
      </div>
      <div class="board-column">
        <header><h3>Closeout & Warranty</h3><a href="#" class="panel-link">Prep Checklist</a></header>
        <ul>
          <li><strong>Punch List</strong><div>92% resolved &mdash; finish glazing fixes.</div></li>
          <li><strong>Docs &amp; O&amp;M</strong><div>Upload manuals for client portal.</div></li>
          <li><strong>Warranty Intake</strong><div>Notify service desk and confirm contacts.</div></li>
        </ul>
      </div>
    </section>

    <div class="card project-wbs-card"><h2>Construction Project</h2><div class="body">
      <div class="kv"><div class="k">Project</div><div class="v" id="cName">-</div></div>
      <div class="kv"><div class="k">Budget</div><div class="v" id="cBudget">-</div></div>
      <table class="table"><thead><tr><th>WBS Code</th><th>Work Package</th></tr></thead><tbody id="wbs"></tbody></table>
      <div class="actions">
        <button class="btn warn" id="btnComplete">Mark Substantial Completion</button>
        <a class="btn" href="ppm_pursuit.html">Back</a>
      </div>
    </div></div>
  </div>
  <div class="project-side">
    <div class="card project-status-card"><h2>Project Health</h2><div class="body">
      <div class="kv"><div class="k">State</div><div class="v" id="projectStateLabel">Execution</div></div>
      <div class="kv"><div class="k">Progress</div><div class="v" id="projectProgressLabel">65%</div></div>
      <div class="progress"><div class="bar" id="projectProgressBar"></div></div>
      <div class="kv"><div class="k">Last Update</div><div class="v" id="projectStateDetail">Today</div></div>
    </div></div>
    <div class="card project-warranty-card"><h2>Warranty</h2><div class="body">
      <div class="kv"><div class="k">Start</div><div class="v" id="wStart">-</div></div>
      <div class="kv"><div class="k">End</div><div class="v" id="wEnd">-</div></div>
    </div></div>
    <section class="smart-banner" id="project-smart-banner">
      <div>
        <p class="eyebrow">Smart Actions</p>
        <h3>Field + back-office collaboration</h3>
        <p>Coordinate updates, punch lists, and warranty prep for <strong id="project-smart-name">this project</strong>.</p>
      </div>
      <div class="actions">
        <div class="pill-row">
          <button type="button" class="btn" data-project-action="Send Progress Update">Send Progress Update</button>
          <button type="button" class="btn" data-project-action="Request Change Order">Request Change Order</button>
          <button type="button" class="btn" data-project-action="Notify Warranty Team">Notify Warranty Team</button>
          <button type="button" class="btn" data-project-action="Sync Actuals">Sync Actuals</button>
        </div>
        <div class="action-block">
          <label class="visually-hidden" for="project-smart-select">Smart Actions</label>
          <select id="project-smart-select">
            <option value="">- Select Smart Action -</option>
            <option>Send Progress Update</option>
            <option>Request Change Order</option>
            <option>Notify Warranty Team</option>
            <option>Sync Actuals</option>
            <option>Share Lessons Learned</option>
          </select>
          <button type="button" class="btn" id="project-smart-apply">Apply</button>
        </div>
      </div>
    </section>
  </div>
</div>

<div id="project-action-modal" class="lead-overlay" aria-hidden="true">
  <div class="lead-modal-card" role="dialog" aria-modal="true" aria-labelledby="projectActionTitle" tabindex="-1">
    <div class="lead-modal-header">
      <div>
        <p class="eyebrow">Project Smart Action</p>
        <h2 id="projectActionTitle">Project Workflow</h2>
      </div>
      <button class="ghost-btn small" type="button" onclick="closeProjectAction()">Close &times;</button>
    </div>
    <div class="lead-action-panels">
      <form class="lead-action-form" data-project-form="Send Progress Update" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Share completion progress and risks.</p>
        <label>Audience<select name="audience">
          <option value="Client">Client</option>
          <option value="Exec">Executive</option>
          <option value="Field">Field Ops</option>
        </select></label>
        <label>Summary<textarea name="summary" rows="3" placeholder="Concrete pour complete, steel erection 50%"></textarea></label>
        <label>Risks<textarea name="risks" rows="2" placeholder="Weather delays, vendor change..."></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Send Update</button>
        </div>
      </form>

      <form class="lead-action-form" data-project-form="Request Change Order" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Launch the change-order process.</p>
        <label>Change Order<input name="coName" placeholder="CO-07: Elevator Upgrade" required></label>
        <label>Amount<input type="number" name="coAmount" placeholder="85000" step="1000"></label>
        <label>Reason<textarea name="coReason" rows="3" placeholder="Owner requested premium finishes"></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Request CO</button>
        </div>
      </form>

      <form class="lead-action-form" data-project-form="Notify Warranty Team" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Handoff key data to the warranty desk.</p>
        <label>Warranty Lead<input name="wLead" placeholder="Warranty Manager" required></label>
        <label>Notes<textarea name="wNotes" rows="3" placeholder="Punch list cleared, schedule handover"></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Notify Warranty</button>
        </div>
      </form>

      <form class="lead-action-form" data-project-form="Sync Actuals" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Sync latest cost actuals back to CX/Finance.</p>
        <label>Message<textarea name="syncMsg" rows="3" placeholder="Pushing week 10 actuals to CX + ERP"></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Sync Actuals</button>
        </div>
      </form>

      <form class="lead-action-form" data-project-form="Share Lessons Learned" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Capture lessons for future pursuits.</p>
        <label>Title<input name="lessonTitle" placeholder="Procurement Optimization" required></label>
        <label>Details<textarea name="lessonBody" rows="4" placeholder="Ordering steel earlier saved 4 weeks..."></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Share Insight</button>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
.lead-action-panels{display:flex;flex-direction:column;gap:16px;}
.lead-action-form{display:flex;flex-direction:column;gap:10px;background:#fff;border:1px solid var(--rw-border);border-radius:16px;padding:16px;}
.lead-action-form p{margin:0;color:var(--rw-muted);}
.lead-action-form label{display:flex;flex-direction:column;font-size:14px;font-weight:600;color:#0f172a;}
.lead-action-form input,
.lead-action-form select,
.lead-action-form textarea{margin-top:4px;border:1px solid var(--rw-border);border-radius:10px;padding:8px;font:inherit;}
.dialog-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:6px;}
</style>


<div id="project-action-modal" class="lead-overlay" aria-hidden="true">
  <div class="lead-modal-card" role="dialog" aria-modal="true" aria-labelledby="projectActionTitle" tabindex="-1">
    <div class="lead-modal-header">
      <div>
        <p class="eyebrow">Project Smart Action</p>
        <h2 id="projectActionTitle">Project Workflow</h2>
      </div>
      <button class="ghost-btn small" type="button" onclick="closeProjectAction()">Close &times;</button>
    </div>
    <div class="lead-action-panels">
      <form class="lead-action-form" data-project-form="Send Progress Update" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Share construction progress with stakeholders.</p>
        <label>Audience<select name="audience">
          <option value="Client">Client</option>
          <option value="Executive">Executive</option>
          <option value="Field">Field</option>
        </select></label>
        <label>Summary<textarea name="summary" rows="3" placeholder="Core complete, finishing HVAC rough-in..."></textarea></label>
        <label>Risks<textarea name="risks" rows="2" placeholder="Weather delays, supply issues..."></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Send Update</button>
        </div>
      </form>

      <form class="lead-action-form" data-project-form="Request Change Order" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Launch the change-order approval workflow.</p>
        <label>Change Order Name<input name="coName" placeholder="CO-07 - Elevator Upgrade" required></label>
        <label>Amount<input type="number" name="coAmount" placeholder="85000" step="1000"></label>
        <label>Reason<textarea name="coReason" rows="3" placeholder="Client requested premium cab finish..."></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Request CO</button>
        </div>
      </form>

      <form class="lead-action-form" data-project-form="Notify Warranty Team" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Hand off key completion details to the warranty desk.</p>
        <label>Warranty Lead<input name="wLead" placeholder="Warranty Manager" required></label>
        <label>Notes<textarea name="wNotes" rows="3" placeholder="Punch list cleared, start warranty intake"></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Notify Warranty</button>
        </div>
      </form>

      <form class="lead-action-form" data-project-form="Sync Actuals" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Sync cost actuals back to CX &amp; Finance.</p>
        <label>Message<textarea name="syncMsg" rows="3" placeholder="Updating CX and ERP with latest cost actuals."></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Sync Actuals</button>
        </div>
      </form>

      <form class="lead-action-form" data-project-form="Share Lessons Learned" onsubmit="return submitProjectAction(event)" style="display:none">
        <p class="muted">Capture lessons learned for future pursuits.</p>
        <label>Title<input name="lessonTitle" placeholder="Procurement Optimization" required></label>
        <label>Details<textarea name="lessonBody" rows="4" placeholder="Ordering structural steel earlier saved 4 weeks..."></textarea></label>
        <div class="dialog-actions">
          <button type="button" class="ghost-btn" onclick="closeProjectAction()">Cancel</button>
          <button type="submit" class="btn primary">Share Insight</button>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
.lead-action-panels{display:flex;flex-direction:column;gap:16px;}
.lead-action-form{display:flex;flex-direction:column;gap:10px;background:#fff;border:1px solid var(--rw-border);border-radius:16px;padding:16px;}
.lead-action-form p{margin:0;color:var(--rw-muted);}
.lead-action-form label{display:flex;flex-direction:column;font-size:14px;font-weight:600;color:#0f172a;}
.lead-action-form input,
.lead-action-form select,
.lead-action-form textarea{margin-top:4px;border:1px solid var(--rw-border);border-radius:10px;padding:8px;font:inherit;}
.dialog-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:6px;}
</style>

<script>
 var projectSnapshot=null;
 function getProjectState(){
   var fallback={const:{name:'Demo Project', budget:0, status:'Execution', progress:65, lastUpdate:'Today', warrantyStart:'-', warrantyEnd:'-'}};
   if(window.RWD && typeof RWD.get==='function'){
     try{ return Object.assign(fallback, RWD.get()||{}); }catch(e){ console.warn('project state fetch failed', e); }
   }
   return fallback;
 }
 function formatCurrencyValue(val){
   var num=Number(val);
   if(isNaN(num)){
     var parsed=parseFloat(String(val||'0').replace(/[^0-9.-]/g,''))||0;
     num=parsed;
   }
   return '$'+num.toLocaleString();
 }
 window.addEventListener('DOMContentLoaded', function(){
   var data=getProjectState();
   var project=data.const||{};
   projectSnapshot=project;
   var formattedBudget=formatCurrencyValue(project.budget||0);
   var heroName=document.getElementById('projectNameDisplay'); if(heroName) heroName.textContent=project.name||'Skyline Microgrid Delivery';
   var status=project.status || 'Execution';
   var lastUpdate=document.getElementById('projectLastUpdate'); if(lastUpdate) lastUpdate.textContent=project.lastUpdate || status;
   var statusPill=document.getElementById('projectStatusPill'); if(statusPill) statusPill.textContent=status;
   var budgetPill=document.getElementById('projectBudgetPill'); if(budgetPill) budgetPill.textContent=formattedBudget;
   var smartLabel=document.getElementById('project-smart-name'); if(smartLabel) smartLabel.textContent=project.name||'this project';
   var stateLabel=document.getElementById('projectStateLabel'); if(stateLabel) stateLabel.textContent=status;
   var stateDetail=document.getElementById('projectStateDetail'); if(stateDetail) stateDetail.textContent=project.lastUpdate || status;
   var progressValue=typeof project.progress==='number'? project.progress : 65;
   progressValue=Math.max(0, Math.min(100, progressValue));
   var progressLabel=document.getElementById('projectProgressLabel'); if(progressLabel) progressLabel.textContent=progressValue+'%';
   var progressBar=document.getElementById('projectProgressBar'); if(progressBar) progressBar.style.width=progressValue+'%';
   var nameField=document.getElementById('cName'); if(nameField) nameField.textContent=project.name||'-';
   var budgetField=document.getElementById('cBudget'); if(budgetField) budgetField.textContent=formattedBudget;
   var warrantyStart=document.getElementById('wStart'); if(warrantyStart) warrantyStart.textContent=project.warrantyStart || '-';
   var warrantyEnd=document.getElementById('wEnd'); if(warrantyEnd) warrantyEnd.textContent=project.warrantyEnd || '-';
   initProjectSmartBanner();
   runConstructionAISummary('overview');
   var body=document.getElementById('wbs');
   if(body){
     body.innerHTML='';
     ['1.0 Mobilization','2.0 Site Work','3.0 Structure'].forEach(function(row){
       var parts=row.split(' ');
       var tr=document.createElement('tr');
       tr.innerHTML='<td>'+parts[0]+'</td><td>'+parts.slice(1).join(' ')+'</td>';
       body.appendChild(tr);
     });
   }
   var completeBtn=document.getElementById('btnComplete');
   if(completeBtn){
     completeBtn.addEventListener('click', function(){
       var finish=function(){
         var s=new Date();
         var e=new Date(s.getFullYear()+1,s.getMonth(),s.getDate());
         if(warrantyStart) warrantyStart.textContent=s.toLocaleDateString();
         if(warrantyEnd) warrantyEnd.textContent=e.toLocaleDateString();
         var finalState='Substantial Completion';
         if(statusPill) statusPill.textContent=finalState;
         if(stateLabel) stateLabel.textContent=finalState;
         if(stateDetail) stateDetail.textContent='Warranty prep in progress';
         if(progressLabel) progressLabel.textContent='100%';
         if(progressBar) progressBar.style.width='100%';
         if(typeof showToast==='function') showToast('Substantial completion captured');
       };
       if(window.RWD && typeof RWD.completeSubstantial==='function'){
         try{ RWD.completeSubstantial(finish); }catch(e){ finish(); }
       }else{
         finish();
       }
     });
   }
 });
function initProjectSmartBanner(){
  var buttons=document.querySelectorAll('[data-project-action]');
  buttons.forEach(function(btn){
    btn.addEventListener('click', function(){ fireProjectAction(btn.dataset.projectAction || btn.textContent); });
  });
  var select=document.getElementById('project-smart-select');
  var apply=document.getElementById('project-smart-apply');
  if(apply){ apply.addEventListener('click', function(){ if(select) fireProjectAction(select.value); }); }
}
function fireProjectAction(action){
  if(!action) return;
  var handled=openProjectActionModal(action);
  if(window.RWD && typeof RWD.actProject==='function'){ RWD.actProject(action); }
  if(!handled && typeof showToast==='function') showToast(action+' triggered');
}

function openProjectActionModal(action){
  var modal=document.getElementById('project-action-modal');
  if(!modal) return false;
  var forms=modal.querySelectorAll('[data-project-form]');
  var match=false;
  forms.forEach(function(form){
    var show=form.dataset.projectForm===action;
    form.style.display=show?'flex':'none';
    if(show){
      match=true;
      prefillProjectAction(form);
      setTimeout(function(){ var first=form.querySelector('input,textarea,select'); if(first) first.focus(); }, 30);
    }
  });
  if(!match) return false;
  var title=document.getElementById('projectActionTitle'); if(title) title.textContent=action;
  modal.style.display='flex';
  modal.setAttribute('aria-hidden','false');
  document.body.classList.add('modal-visible');
  return true;
}

function closeProjectAction(){
  var modal=document.getElementById('project-action-modal');
  if(!modal) return;
  modal.style.display='none';
  modal.setAttribute('aria-hidden','true');
  document.body.classList.remove('modal-visible');
}

function prefillProjectAction(form){
  var state=(window.RWD && typeof RWD.get==='function')?(function(){ try{return RWD.get();}catch(e){ return {}; } })():{};
  var project=state.const||{};
  if(form.dataset.projectForm==='Send Progress Update'){
    if(form.elements.summary && !form.elements.summary.value){ form.elements.summary.value=project.name+' progress update'; }
  }
  if(form.dataset.projectForm==='Request Change Order'){
    if(form.elements.coName && !form.elements.coName.value){ form.elements.coName.value='CO - '+(project.name||'Project'); }
  }
}

function submitProjectAction(ev){
  if(ev) ev.preventDefault();
  var form=ev?ev.target:null;
  if(!form) return false;
  var action=form.dataset.projectForm || 'Action';
  switch(action){
    case 'Send Progress Update':
      if(typeof showToast==='function') showToast('Progress update sent');
      break;
    case 'Request Change Order':
      if(window.RWD && typeof RWD.runOICJob==='function'){ try{ RWD.runOICJob('Change order'); }catch(e){} }
      if(typeof showToast==='function') showToast('Change order requested');
      break;
    case 'Notify Warranty Team':
      if(typeof showToast==='function') showToast('Warranty team notified');
      break;
    case 'Sync Actuals':
      if(window.RWD && typeof RWD.runOICJob==='function'){ try{ RWD.runOICJob('Sync actuals'); }catch(e){} }
      if(typeof showToast==='function') showToast('Actuals sync in progress');
      break;
    case 'Share Lessons Learned':
      if(typeof showToast==='function') showToast('Lessons learned shared');
      break;
    default:
      if(typeof showToast==='function') showToast(action+' completed');
  }
  form.reset();
  closeProjectAction();
  return false;
}

function runConstructionAISummary(mode){
  var el=document.getElementById('constructionAiSummaryText');
  if(!el) return false;
  var state=projectSnapshot || (getProjectState().const||{});
  var budget=formatCurrencyValue(state.budget||0);
  var status=state.status||'Execution';
  var progress=typeof state.progress==='number'? state.progress : 65;
  var message='';
  if(mode==='risk'){
    message='<strong>Field risks:</strong><ul><li>Weather shift could impact roofing pace &mdash; prep contingency.</li><li>Change order pending for elevator upgrade ($85K).</li><li>Need QA eyes on inverter commissioning before warranty handoff.</li></ul>';
  }else if(mode==='action'){
    message='<strong>Recommended Smart Actions:</strong><ul><li>Send progress update summarizing '+progress+'% completion.</li><li>Trigger change-order workflow and sync actuals to CX/ERP.</li><li>Notify warranty desk so start '+(state.warrantyStart||'TBD')+' intake.</li><li>Publish lessons learned for future pursuits.</li></ul>';
  }else{
    message='<strong>Overview:</strong> '+(state.name||'Construction project')+' running at '+progress+'% completion with budget '+budget+' and status '+status+'.<ul><li>Field crews are closing punch items &amp; prepping commissioning.</li><li>AI recommends keeping execs aligned with a concise briefing.</li><li>Warranty intake is next milestone once substantial completion is certified.</li></ul>';
  }
  el.innerHTML=message;
  return false;
}
</script>
<div class="footer">© Demo – Redwood-inspired mockup</div></div>
  <nav class="vision-footer" aria-label="Global navigation">    <a href="sales_cloud.html">Sales Dashboard</a>    <a href="account_360.html">Accounts</a>    <a href="cx_lead.html">Leads</a>    <a href="cx_opportunity.html">Opportunities</a>    <a href="quote_to_docusign.html">Quotes</a>
  </nav>
</body>
</html>









